import t from"typedarray-to-buffer";var e,i="undefined"!=typeof document&&"function"==typeof document.createElement,r=i?["webp","jpeg"]:["png"],n=/*#__PURE__*/function(){function n(t,e,i){if(void 0===e&&(e=r),void 0===i&&(i=.5),this.quality=void 0,this.types=void 0,this.canvas=void 0,e.length>2)throw new Error("Too many image types are specified!");this.canvas=t,this.quality=i,this.types=e}var o=n.prototype;return o.composeMimeType=function(t){var e;return this.types[t]&&(e="image/"+this.types[t]),e},o.isMatch=function(t,e){return t.match(e)},o.getTestCanvas=function(){var t;return i?(t=document.createElement("canvas")).width=t.height=1:t=this.canvas,t},o.canvasSupportsMimeType=function(t){try{var e=this.getTestCanvas(),i=e.toDataURL&&e.toDataURL(t);return this.isMatch(i,t)}catch(t){return!1}},o.figureMimeType=function(){var t=this.composeMimeType(0);return t&&this.canvasSupportsMimeType(t)||(this.types[1]?(t=this.composeMimeType(1))&&!this.canvasSupportsMimeType(t)&&(t=void 0):t=void 0),t},o.uriToBuffer=function(e){var r,o=e.split(",")[1];if(!o)throw new Error("Empty uri string given!");if(!(r=i?window.atob(o):null==n.atob?void 0:n.atob(o)))throw new Error("Byte are empty, something within atob went wrong.");for(var a=new Uint8Array(r.length),s=0,u=r.length;s<u;s++)a[s]=r.charCodeAt(s);return t(a)},o.toBuffer=function(){var t,e=this.getMimeType();if(e){var i=this.canvas.toDataURL(e,this.quality);t=this.uriToBuffer(i)}return t},o.getMimeType=function(){return e&&i||(e=this.figureMimeType()),e},n}();n.atob=void 0;export{n as default};
//# sourceMappingURL=canvas-to-buffer.esm.js.map
