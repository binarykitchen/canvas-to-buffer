!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("typedarray-to-buffer"),require("atob")):"function"==typeof define&&define.amd?define(["typedarray-to-buffer","atob"],e):(t||self).canvasToBuffer=e(t.typedarrayToBuffer,t.atob)}(this,function(t,e){function i(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var n,r=/*#__PURE__*/i(t),o=/*#__PURE__*/i(e),a="undefined"!=typeof document&&"function"==typeof document.createElement,u=a?["webp","jpeg"]:["png"],s=/*#__PURE__*/function(){function t(t,e,i){if(void 0===e&&(e=u),void 0===i&&(i=.5),this.quality=void 0,this.types=void 0,this.canvas=void 0,e.length>2)throw new Error("Too many image types are specified!");this.canvas=t,this.quality=i,this.types=e}var e=t.prototype;return e.composeMimeType=function(t){var e;return this.types[t]&&(e="image/"+this.types[t]),e},e.isMatch=function(t,e){return t.match(e)},e.getTestCanvas=function(){var t;return a?(t=document.createElement("canvas")).width=t.height=1:t=this.canvas,t},e.canvasSupportsMimeType=function(t){try{var e=this.getTestCanvas(),i=e.toDataURL&&e.toDataURL(t);return this.isMatch(i,t)}catch(t){return!1}},e.figureMimeType=function(){var t=this.composeMimeType(0);return t&&this.canvasSupportsMimeType(t)||(this.types[1]?(t=this.composeMimeType(1))&&!this.canvasSupportsMimeType(t)&&(t=void 0):t=void 0),t},e.uriToBuffer=function(t){var e,i=t.split(",")[1];if(!i)throw new Error("Empty uri string given!");if("function"!=typeof o.default)throw new Error("atob function is missing");e=o.default(i);for(var n=new Uint8Array(e.length),a=0,u=e.length;a<u;a++)n[a]=e.charCodeAt(a);return r.default(n)},e.toBuffer=function(){var t,e=this.getMimeType();if(e){var i=this.canvas.toDataURL(e,this.quality);t=this.uriToBuffer(i)}return t},e.getMimeType=function(){return n&&a||(n=this.figureMimeType()),n},t}();return s.atob=void 0,s});
//# sourceMappingURL=canvas-to-buffer.umd.js.map
